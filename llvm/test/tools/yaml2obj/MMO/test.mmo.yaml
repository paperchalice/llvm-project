# RUN: yaml2obj %s | obj2yaml | FileCheck %s

--- !MMO
Preamble:
  Version:         1
  CreatedTime:     0
Segments:
  - OpCode:          LOC
    HighByte:        DATA
    Offset:          0x0
  - StartAddress:    0x2000000000000000
    Data:            '000000000000000061620000'
  - OpCode:          LOC
    HighByte:        INSTRUCTION
    Offset:          0x12345678C
  - OpCode:          FILE
    Name:            test.mms
    Number:          0
  - OpCode:          LINE
    Number:          7
  - StartAddress:    0x12345678C
    Data:            F0000000
  - OpCode:          SKIP
    Delta:           0x4000
  - OpCode:          LINE
    Number:          9
  - StartAddress:    0x12345A790
    Data:            8103FE0142030000
  - OpCode:          LINE
    Number:          10
  - StartAddress:    0x12345A798
    Data:            '00000000'
  - OpCode:          LOC
    HighByte:        INSTRUCTION
    Offset:          0x12345A768
  - OpCode:          FIXRX
    FixType:         OTHERWISE
    Delta:           -11
  - OpCode:          FIXR
    Delta:           0xFF7
  - OpCode:          FIXO
    HighByte:        0x20
    Offset:          0x0
  - OpCode:          FILE
    Name:            foo.mms
    Number:          1
  - OpCode:          LINE
    Number:          4
  - StartAddress:    0x12345A768
    Data:            F000000A
  - OpCode:          SPEC
    Type:            5
  - StartAddress:    0x12345A76C
    Data:            0000020000FE0000
  - OpCode:          LOC
    HighByte:        DATA
    Offset:          0xA
  - StartAddress:    0x200000000000000A
    Data:            '00006364'
  - OpCode:          QUOTE
    Value:           '98000000'
Postamble:
  G:               254
  Values:          [ 0x2000000000000008, 0x12345678C ]
SymbolTable:
  IsUTF16:         false
  Symbol:
    - Name:            Main
      Serial:          1
      Equiv:           0x12345678C
      Type:            NORMAL
    - Name:            a
      Serial:          2
      Equiv:           0xFE
      Type:            REGISTER
    - Name:            ABCD
      Serial:          3
      Equiv:           0x2000000000000008
      Type:            NORMAL
...

# CHECK:  --- !MMO
# CHECK:  Preamble:
# CHECK:    Version:         1
# CHECK:    CreatedTime:     0
# CHECK:  Segments:
# CHECK:    - OpCode:          LOC
# CHECK:      HighByte:        DATA
# CHECK:      Offset:          0x0
# CHECK:    - StartAddress:    0x2000000000000000
# CHECK:      Data:            '000000000000000061620000'
# CHECK:    - OpCode:          LOC
# CHECK:      HighByte:        INSTRUCTION
# CHECK:      Offset:          0x12345678C
# CHECK:    - OpCode:          FILE
# CHECK:      Name:            test.mms
# CHECK:      Number:          0
# CHECK:    - OpCode:          LINE
# CHECK:      Number:          7
# CHECK:    - StartAddress:    0x12345678C
# CHECK:      Data:            F0000000
# CHECK:    - OpCode:          SKIP
# CHECK:      Delta:           0x4000
# CHECK:    - OpCode:          LINE
# CHECK:      Number:          9
# CHECK:    - StartAddress:    0x12345A790
# CHECK:      Data:            8103FE0142030000
# CHECK:    - OpCode:          LINE
# CHECK:      Number:          10
# CHECK:    - StartAddress:    0x12345A798
# CHECK:      Data:            '00000000'
# CHECK:    - OpCode:          LOC
# CHECK:      HighByte:        INSTRUCTION
# CHECK:      Offset:          0x12345A768
# CHECK:    - OpCode:          FIXRX
# CHECK:      FixType:         OTHERWISE
# CHECK:      Delta:           -11
# CHECK:    - OpCode:          FIXR
# CHECK:      Delta:           0xFF7
# CHECK:    - OpCode:          FIXO
# CHECK:      HighByte:        0x20
# CHECK:      Offset:          0x0
# CHECK:    - OpCode:          FILE
# CHECK:      Name:            foo.mms
# CHECK:      Number:          1
# CHECK:    - OpCode:          LINE
# CHECK:      Number:          4
# CHECK:    - StartAddress:    0x12345A768
# CHECK:      Data:            F000000A
# CHECK:    - OpCode:          SPEC
# CHECK:      Type:            5
# CHECK:    - StartAddress:    0x12345A76C
# CHECK:      Data:            0000020000FE0000
# CHECK:    - OpCode:          LOC
# CHECK:      HighByte:        DATA
# CHECK:      Offset:          0xA
# CHECK:    - StartAddress:    0x200000000000000A
# CHECK:      Data:            '00006364'
# CHECK:    - OpCode:          QUOTE
# CHECK:      Value:           '98000000'
# CHECK:  Postamble:
# CHECK:    G:               254
# CHECK:    Values:          [ 0x2000000000000008, 0x12345678C ]
# CHECK:  SymbolTable:
# CHECK:    IsUTF16:         false
# CHECK:    Symbol:
# CHECK:      - Name:            Main
# CHECK:        Serial:          1
# CHECK:        Equiv:           0x12345678C
# CHECK:        Type:            NORMAL
# CHECK:      - Name:            a
# CHECK:        Serial:          2
# CHECK:        Equiv:           0xFE
# CHECK:        Type:            REGISTER
# CHECK:      - Name:            ABCD
# CHECK:        Serial:          3
# CHECK:        Equiv:           0x2000000000000008
# CHECK:        Type:            NORMAL
# CHECK:  ...
